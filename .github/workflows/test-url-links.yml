---
  name: check for broken links

  on:
    pull_request: 
      paths:
        - "source/**"
    schedule:
      - cron: '3 7 * * TUE'

  permissions: {}
  jobs:
    check-links:
      name: Test
      runs-on: ubuntu-latest
      permissions:
        contents: read
      steps:
        - name: Checkout
          id: checkout
          uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5.0.0

        - name: Lychee
          id: lychee
          uses: lycheeverse/lychee-action@5c4ee84814c983aa7164eaee476f014e53ff3963 # v2.5.0
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          with:
            args: --verbose --no-progress './**/*.md' './**/*.html' './**/*.erb' --config config/lychee.toml
            fail: true