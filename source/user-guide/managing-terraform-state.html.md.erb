---
owner_slack: "#modernisation-platform"
title: Managing Terraform State
last_reviewed_on: 2025-02-27
review_in: 6 months
---

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NXTCMQ7ZX6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-NXTCMQ7ZX6');
</script>

# <%= current_page.data.title %>

## Introduction

In certain scenarios it may be necessary to perform one-off actions on your terraform state files, for instance...

-force-unlocking the TF state
-importing manually created resources
-removing resources you no longer wish to manage in state

For these scenarios we have supplied a dedicated [Terraform State Management](https://github.com/ministryofjustice/modernisation-platform-environments/actions/workflows/terraform-state-management.yml) GitHub Action for managing your state files.

## Using the GitHub Action 

1. Navigate to the [Terraform State Management](https://github.com/ministryofjustice/modernisation-platform-environments/actions/workflows/terraform-state-management.yml) GitHub Action
1. Select `Run workflow`
1. You will be presented with a series of options for the various operations available 

![Run Workflow Options](../../images/manage-tf-state-gh-action.png)

## How to force unlock TF state

1. Select the `unlock` operation
1. Enter your application name e.g. `apex`
1. Select the relevant environment workspace e.g. `development`
1. Enter the state lock id e.g. `f2aa1369-2236-3b89-5a03-db4de84b1234`
1. Select `Run Workflow`
1. The workflow will commence and show a summary of the information supplied, after which a manual review is required.
1. If you are content to proceed select `review deployments`, select the relevant tick box for the environment and finally select `Approve and deploy`
1. The deployment will continue and unlock the state. If any errors are encountered you can review the logs for further info.

> **Note:** If you are unlocking the state for a component directory (i.e. a subfolder in `terraform/environments/<application>`) then you will need to supply the name of the relevant directory in the `Component` field.

> For most users this can be left as the default `root` value

## How to import resources into the TF state

## How to remove resources from the TF state

