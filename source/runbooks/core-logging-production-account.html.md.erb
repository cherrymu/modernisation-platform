---
owner_slack: "#modernisation-platform"
title: Core Logging Production Account Setup
last_reviewed_on: 2024-09-18
review_in: 6 months
---

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NXTCMQ7ZX6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-NXTCMQ7ZX6');
</script>

# <%= current_page.data.title %>

## Overview

The core-logging AWS account is responsible for managing all core logging resources.

| Resource | Description |
|----------------- |------------------------------------------------
| S3 | Stores logs and provides scalable, secure storage for log data
| KMS | Manages encryption keys used to securely encrypt the contents of S3 buckets and other resources.
| PagerDuty | Hosts resources used by PagerDuty for alerting and incident management
| VPC | Provides networking resources
| Athena| Provides an interactive query service to analyze log data stored in S3 using standard SQL queries
| Firehose| 	Manages data streams and processes that collect, transform, and load log data into storage destinations

## Steps
## 1. Account Creation 

To initiate the account recreation process, go to the GitHub Actions page for the Modernisation Platform repository and trigger the new environment [workflow] (https://github.com/ministryofjustice/modernisation-platform/actions/workflows/new-environment.yml).
This workflow should detect that the account no longer exists and propose to recreate the account. As part of this process, it will also execute the baseline runs for the account. 

## 2. Deploy Core Logging Production Resources

This can be achieved by triggering core-logging deployment workflow run, which can be [found here](https://github.com/ministryofjustice/modernisation-platform/blob/main/.github/workflows/core-logging-deployment.yml).
Alternatively, this can be done as manual deployment: 
- Navigate to the `modernisation-platfom repo` and change to the `core-logging directory`
- Run `terraform plan` in the production workspace
- Using admin credentials, execute `terraform apply`

## 3. Verify Resources

- Log into AWS Console for the core-logging account
- Check and verify that resources have been correctly provisioned (KMS keys, S3, etc.)

## 4. Notify Mod Platform Team
- Inform the Mod Platform team that the account has been recreated
- Liaise with the team to validate any rebuilds


## References

* [Accessing the AWS Console](https://user-guide.modernisation-platform.service.justice.gov.uk/user-guide/accessing-the-aws-console.html)
* [Disaster Recovery Process](https://user-guide.modernisation-platform.service.justice.gov.uk/runbooks/dr-process.html)
